<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with read.gt3x • read.gt3x</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with read.gt3x">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">read.gt3x</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/read.gt3x.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting started with read.gt3x</h1>
                        <h4 class="author">Tuomo Nieminen</h4>
            
            <h4 class="date">2018-09-10</h4>
      
      

    </div>

    
    
<div class="contents">
<p>This document describes how the <strong>read.gt3x</strong> package can be used to read binary activity data into R. To access the read.gt3x package, use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(read.gt3x)</code></pre></div>
<p>For source code and installation instructions, see the <a href="https://github.com/THLfi/read.gt3x">GitHub page</a>.</p>
<div id="reading--gt3x-data-into-r" class="section level2">
<h2 class="hasAnchor">
<a href="#reading--gt3x-data-into-r" class="anchor"></a>Reading .gt3x data into R</h2>
<p>The read.gt3x package includes two sample .gt3x files which I’ll use to demonstrate reading the data. First we need the path to a single gt3x file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gt3xfile &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gt3x_datapath.html">gt3x_datapath</a></span>(<span class="dv">1</span>)</code></pre></div>
<div id="method-1-temporary-unzip-and-read" class="section level3">
<h3 class="hasAnchor">
<a href="#method-1-temporary-unzip-and-read" class="anchor"></a>Method 1: Temporary unzip and read</h3>
<p>readGT3X() can take as input a path to a single .gt3x file and will then read activity samples as an R matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readGT3X.html">readGT3X</a></span>(gt3xfile)
<span class="co">#&gt; Input is a .gt3x file, unzipping to a temporary location first...</span>
<span class="co">#&gt; Unzipping gt3x data to /tmp/RtmpddbLEQ</span>
<span class="co">#&gt; 1/1 Unzipping  /home/tnin/.read.gt3x-data/EE_left_29.5.2017-05-30.gt3x </span>
<span class="co">#&gt;  === info.txt and log.bin extracted to  /tmp/RtmpddbLEQ/EE_left_29.5.2017-05-30</span>
<span class="co">#&gt; Parsing GT3X data via CPP.. expected sample size: 60692900</span>
<span class="co">#&gt; Sample size: 60684200</span>
<span class="co">#&gt; Done (in 5 seconds)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(X)
<span class="co">#&gt;           X     Y      Z</span>
<span class="co">#&gt; [1,] -0.035 0.348 -0.965</span>
<span class="co">#&gt; [2,] -0.008 0.352 -0.934</span>
<span class="co">#&gt; [3,]  0.008 0.332 -0.887</span>
<span class="co">#&gt; [4,]  0.008 0.320 -0.848</span>
<span class="co">#&gt; [5,]  0.004 0.316 -0.844</span>
<span class="co">#&gt; [6,]  0.000 0.301 -0.852</span></code></pre></div>
</div>
<div id="method-2-permanent-unzip-then-read" class="section level3">
<h3 class="hasAnchor">
<a href="#method-2-permanent-unzip-then-read" class="anchor"></a>Method 2: permanent unzip, then read</h3>
<p>.gt3x files are actually zip archives which contain two files: log.bin and info.txt. log.bin is a binary file that contains the actual samples. It might make sense to store the data as <em>unzipped</em> folders containing these two files, because otherwise the readGT3X() function will have to unzip each .gt3x archive to a temporary location, every time you need to access the data.</p>
<p>readGT3X() also accepts paths to unzipped gt3x folders. To demonstrate the usage, we’ll unzip the sample .gt3x files in the package, and then read them. The unzipGT3X() helper function unzips all .gt3x files in a given directory. By default, the contents of a .gt3x file named “subject001.gt3x” are extracted to a folder named “subject001”. unzipGT3X() returns a vector of paths to the unzipped gt3x folders. The location argument can be used to choose where to locate those folders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datadir &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gt3x_datapath.html">gt3x_datapath</a></span>() <span class="co"># location of .gt3x files</span>
<span class="co">#&gt; Downloading gt3x sample data...</span>
gt3xfolders &lt;-<span class="st"> </span><span class="kw"><a href="../reference/unzip.gt3x.html">unzip.gt3x</a></span>(datadir, <span class="dt">location =</span> <span class="kw">tempdir</span>())
<span class="co">#&gt; Unzipping gt3x data to /tmp/RtmpddbLEQ</span>
<span class="co">#&gt; 1/2 Unzipping  /home/tnin/.read.gt3x-data/EE_left_29.5.2017-05-30.gt3x </span>
<span class="co">#&gt;  === info.txt and log.bin extracted to  /tmp/RtmpddbLEQ/EE_left_29.5.2017-05-30 </span>
<span class="co">#&gt; 2/2 Unzipping  /home/tnin/.read.gt3x-data/SS_left_19.5.2017-05-22.gt3x </span>
<span class="co">#&gt;  === info.txt and log.bin extracted to  /tmp/RtmpddbLEQ/SS_left_19.5.2017-05-22</span></code></pre></div>
<p>The readGT3X() function accepts a path to an uzipped gt3x folder. It is a bit faster if the unzip step has already been performed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gt3xfolder &lt;-<span class="st"> </span>gt3xfolders[<span class="dv">1</span>]
X &lt;-<span class="st"> </span><span class="kw"><a href="../reference/readGT3X.html">readGT3X</a></span>(gt3xfolder)
<span class="co">#&gt; Parsing GT3X data via CPP.. expected sample size: 60692900</span>
<span class="co">#&gt; Sample size: 60684200</span>
<span class="co">#&gt; Done (in 4 seconds)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(X)
<span class="co">#&gt;           X     Y      Z</span>
<span class="co">#&gt; [1,] -0.035 0.348 -0.965</span>
<span class="co">#&gt; [2,] -0.008 0.352 -0.934</span>
<span class="co">#&gt; [3,]  0.008 0.332 -0.887</span>
<span class="co">#&gt; [4,]  0.008 0.320 -0.848</span>
<span class="co">#&gt; [5,]  0.004 0.316 -0.844</span>
<span class="co">#&gt; [6,]  0.000 0.301 -0.852</span></code></pre></div>
</div>
</div>
<div id="activity-data-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#activity-data-matrix" class="anchor"></a>Activity data matrix</h2>
<p>Internally, the data matrix returned by readGT3X() is a bit smarter than it looks, as it knows all the (relative) timestamps of the observations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(X)
<span class="co">#&gt;  activity [1:60684200, 1:3] -0.035 -0.008 0.008 0.008 0.004 0 0 -0.004 -0.02 -0.027 ...</span>
<span class="co">#&gt;  - attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   ..$ : NULL</span>
<span class="co">#&gt;   ..$ : chr [1:3] "X" "Y" "Z"</span>
<span class="co">#&gt;  - attr(*, "time_index")= int [1:60684200] 0 1 2 3 4 5 6 7 8 9 ...</span>
<span class="co">#&gt;  - attr(*, "start_time")= POSIXct[1:1], format: "2017-05-23 12:15:00"</span>
<span class="co">#&gt;  - attr(*, "sample_rate")= int 100</span></code></pre></div>
<ul>
<li>time_index: Time passed since start</li>
<li>start_time: timestamp of first sample</li>
<li>sample_rate: Samples per second.</li>
</ul>
</div>
<div id="converting-to-a-data-frame" class="section level2">
<h2 class="hasAnchor">
<a href="#converting-to-a-data-frame" class="anchor"></a>Converting to a data.frame</h2>
<p>the read.gt3x package has an as.data.frame method for the activity matrix, which converts the matrix to a dataframe and adds a “time” column, which gives the timestamp of each sample.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(X)
<span class="kw">head</span>(df)
<span class="co">#&gt;        X     Y      Z                   time</span>
<span class="co">#&gt; 1 -0.035 0.348 -0.965 2017-05-23 12:15:00.00</span>
<span class="co">#&gt; 2 -0.008 0.352 -0.934 2017-05-23 12:15:00.00</span>
<span class="co">#&gt; 3  0.008 0.332 -0.887 2017-05-23 12:15:00.01</span>
<span class="co">#&gt; 4  0.008 0.320 -0.848 2017-05-23 12:15:00.02</span>
<span class="co">#&gt; 5  0.004 0.316 -0.844 2017-05-23 12:15:00.03</span>
<span class="co">#&gt; 6  0.000 0.301 -0.852 2017-05-23 12:15:00.04</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#reading--gt3x-data-into-r">Reading .gt3x data into R</a></li>
      <li><a href="#activity-data-matrix">Activity data matrix</a></li>
      <li><a href="#converting-to-a-data-frame">Converting to a data.frame</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Tuomo Nieminen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
